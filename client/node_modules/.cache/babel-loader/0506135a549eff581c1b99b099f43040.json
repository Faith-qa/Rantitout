{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useAuthContext } from \"./useAuthContext\";\nimport { useChatContext } from \"./useChatContext\";\nexport const useChats = () => {\n  _s();\n\n  const [chats, setChats] = useState([]);\n  const [err, setErr] = useState(null);\n  const {\n    user\n  } = useAuthContext(); //const {dispatch} = useChatContext()\n\n  const url = `${process.env.REACT_APP_BASE_URL}/api/v1/chats/${user._id}`; // useEffect(()=>{\n  //     LoadChats()\n  //     console.log(chats)\n  // }, [chats])\n\n  const LoadChats = async () => {\n    await fetch(url, {\n      method: 'GET',\n      headers: {\n        Authorization: `Bearer ${user.token}`,\n        'Content-Type': 'Application/json'\n      }\n    }).then(response => {\n      const data = response.data;\n      setChats(data);\n    }).catch(() => {\n      alert('error retrieving data');\n    });\n  };\n\n  const updateChat = async (cDate, text) => {\n    setErr(null);\n    console.log(url + `/${cDate}`);\n\n    try {\n      //update chats on date\n      const response = await fetch(url + `/${cDate}`, {\n        method: 'PUT',\n        headers: {\n          Authorization: `Bearer ${user.token}`,\n          'Content-Type': 'Application/json'\n        },\n        body: JSON.stringify({\n          text\n        })\n      });\n      const json = await response.json();\n      setChats(json);\n      console.log(\"HELLO WORLD\", chats);\n    } catch (err) {\n      setErr(err);\n      console.log(err);\n    }\n  };\n\n  const createChat = async date => {\n    setErr(null);\n\n    try {\n      const response = await fetch(url + `/${date}`, {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${user.token}`,\n          'Content-Type': 'Application/json'\n        },\n        body: JSON.stringify({\n          date\n        })\n      });\n      const json = await response.json();\n      console.log(\"hello world\", json);\n      setChats(json);\n    } catch (err) {\n      console.log(err);\n      setErr(err);\n    }\n  };\n\n  return {\n    LoadChats,\n    updateChat,\n    createChat,\n    chats,\n    err\n  };\n};\n\n_s(useChats, \"zugv9YlOFU4y4z/d2AtUst7csvI=\", false, function () {\n  return [useAuthContext];\n});","map":{"version":3,"sources":["/home/faith/personal_project/TalktoMe/client/src/hooks/useChats.jsx"],"names":["React","useState","useEffect","useAuthContext","useChatContext","useChats","chats","setChats","err","setErr","user","url","process","env","REACT_APP_BASE_URL","_id","LoadChats","fetch","method","headers","Authorization","token","then","response","data","catch","alert","updateChat","cDate","text","console","log","body","JSON","stringify","json","createChat","date"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\n\nimport { useAuthContext } from \"./useAuthContext\";\nimport { useChatContext } from \"./useChatContext\";\n\nexport const useChats = () => {\n    const [chats, setChats] = useState([]);\n    const [err, setErr] = useState(null);\n\n    const {user} = useAuthContext();\n    //const {dispatch} = useChatContext()\n    const url = `${process.env.REACT_APP_BASE_URL}/api/v1/chats/${user._id}`;\n\n    // useEffect(()=>{\n    //     LoadChats()\n    //     console.log(chats)\n    // }, [chats])\n    const LoadChats = async()=>{\n       await fetch(url, {\n        method: 'GET',\n        headers: {Authorization: `Bearer ${user.token}`, 'Content-Type': 'Application/json'},\n       })\n       .then((response)=>{\n        const data = response.data\n        setChats(data)\n       })\n       .catch(()=>{\n        alert('error retrieving data')\n       })\n\n\n\n\n\n    }\n\n    const updateChat = async(cDate, text) => {\n        setErr(null)\n        console.log(url +`/${cDate}`)\n\n        try{\n            //update chats on date\n            const response = await fetch(url +`/${cDate}`, {\n                method: 'PUT',\n                headers: {Authorization: `Bearer ${user.token}`, 'Content-Type': 'Application/json'},\n                body: JSON.stringify({text})\n            })\n\n            const json = await response.json();\n            setChats(json)\n            console.log(\"HELLO WORLD\", chats)\n        }catch(err){\n            setErr(err);\n            console.log(err)\n        }\n    }\n\n    const createChat = async(date)=> {\n        setErr(null)\n        try{\n            const response = await fetch(url + `/${date}`, {\n                method: 'POST',\n                headers: {Authorization: `Bearer ${user.token}`, 'Content-Type': 'Application/json'},\n                body: JSON.stringify({date})\n            })\n\n            const json = await response.json()\n            console.log(\"hello world\",json)\n            setChats(json)\n        }catch(err){console.log(err); setErr(err)}\n\n    }\n\n    return {LoadChats, updateChat,createChat, chats, err};\n}"]},"metadata":{},"sourceType":"module"}