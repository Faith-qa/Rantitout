{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useAuthContext } from \"./useAuthContext\";\nimport { useChatContext } from \"./useChatContext\";\nexport const useChats = () => {\n  _s();\n\n  const [chats, setChats] = useState([]);\n  const [err, setErr] = useState(null);\n  const {\n    user\n  } = useAuthContext(); //const {dispatch} = useChatContext()\n\n  const url = `${process.env.REACT_APP_BASE_URL}/api/v1/chats/${user._id}`;\n\n  const loadChats = async () => {\n    setErr(null); // var chaats = []\n    //const url = `${process.env.REACT_APP_BASE_URL}/api/v1/chats/${user._id}`;\n\n    try {\n      const response = await fetch(url, {\n        method: 'GET',\n        headers: {\n          Authorization: `Bearer ${user.token}`\n        }\n      });\n      const json = await response.json();\n\n      for (var i = 0; i < json.length; i++) {\n        for (var j = 0; j < i.length; j++) {\n          if (!j.date) {\n            setErr(json);\n            throw new Error(JSON.stringify(json));\n          } //  chaats.push(j)\n\n        }\n      } //console.log(json.date)\n      // if (!json.date) {\n      //     setErr(json)\n      //     throw new Error(JSON.stringify(json))\n      // }\n      // console.log(\"hello\", JSON.parse(JSON.stringify(json)))\n\n\n      setChats(...json); //dispatch({type: 'LOADMESSAGES', payload: json})\n    } catch (err) {\n      setErr(err);\n      console.log(err);\n    }\n  };\n\n  const updateChat = async cDate => {\n    try {\n      //update chats on date\n      const response = await fetch(url + `/{cDate}`, {\n        method: 'PUT',\n        headers: {\n          Authorization: `Bearer ${user.token}`,\n          'Content-Type': 'Application/json'\n        },\n        body: JSON.stringify(body)\n      });\n      const json = await response.json();\n      console.log(...json);\n      setChats(...json);\n    } catch (err) {\n      setErr(err);\n      console.log(err);\n    }\n  };\n\n  return {\n    loadChats,\n    chats,\n    err\n  };\n};\n\n_s(useChats, \"zugv9YlOFU4y4z/d2AtUst7csvI=\", false, function () {\n  return [useAuthContext];\n});","map":{"version":3,"sources":["/home/faith/personal_project/TalktoMe/client/src/hooks/useChats.jsx"],"names":["React","useState","useAuthContext","useChatContext","useChats","chats","setChats","err","setErr","user","url","process","env","REACT_APP_BASE_URL","_id","loadChats","response","fetch","method","headers","Authorization","token","json","i","length","j","date","Error","JSON","stringify","console","log","updateChat","cDate","body"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AAEA,SAASC,cAAT,QAA+B,kBAA/B;AACA,SAASC,cAAT,QAA+B,kBAA/B;AAEA,OAAO,MAAMC,QAAQ,GAAG,MAAM;AAAA;;AAC1B,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBL,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACM,GAAD,EAAMC,MAAN,IAAgBP,QAAQ,CAAC,IAAD,CAA9B;AAEA,QAAM;AAACQ,IAAAA;AAAD,MAASP,cAAc,EAA7B,CAJ0B,CAK1B;;AACA,QAAMQ,GAAG,GAAI,GAAEC,OAAO,CAACC,GAAR,CAAYC,kBAAmB,iBAAgBJ,IAAI,CAACK,GAAI,EAAvE;;AAGA,QAAMC,SAAS,GAAG,YAAS;AACvBP,IAAAA,MAAM,CAAC,IAAD,CAAN,CADuB,CAExB;AACC;;AAEA,QAAG;AACC,YAAMQ,QAAQ,GAAG,MAAMC,KAAK,CAACP,GAAD,EAAM;AAC9BQ,QAAAA,MAAM,EAAE,KADsB;AAE9BC,QAAAA,OAAO,EAAE;AAACC,UAAAA,aAAa,EAAG,UAASX,IAAI,CAACY,KAAM;AAArC;AAFqB,OAAN,CAA5B;AAKA,YAAMC,IAAI,GAAG,MAAMN,QAAQ,CAACM,IAAT,EAAnB;;AAEA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,IAAI,CAACE,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AAClC,aAAI,IAAIE,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGF,CAAC,CAACC,MAArB,EAA6BC,CAAC,EAA9B,EAAkC;AAC9B,cAAI,CAACA,CAAC,CAACC,IAAP,EAAY;AACRlB,YAAAA,MAAM,CAACc,IAAD,CAAN;AACA,kBAAM,IAAIK,KAAJ,CAAUC,IAAI,CAACC,SAAL,CAAeP,IAAf,CAAV,CAAN;AACH,WAJ6B,CAKhC;;AACD;AAIJ,OAnBF,CAoBC;AAEA;AACA;AACA;AACA;AACD;;;AACChB,MAAAA,QAAQ,CAAC,GAAGgB,IAAJ,CAAR,CA3BD,CA4BC;AAKH,KAjCD,CAiCC,OAAMf,GAAN,EAAU;AACPC,MAAAA,MAAM,CAACD,GAAD,CAAN;AACAuB,MAAAA,OAAO,CAACC,GAAR,CAAYxB,GAAZ;AAEH;AAMJ,GAhDD;;AAkDA,QAAMyB,UAAU,GAAG,MAAMC,KAAN,IAAgB;AAC/B,QAAG;AACC;AACA,YAAMjB,QAAQ,GAAG,MAAMC,KAAK,CAACP,GAAG,GAAG,UAAP,EAAkB;AAC1CQ,QAAAA,MAAM,EAAE,KADkC;AAE1CC,QAAAA,OAAO,EAAE;AAACC,UAAAA,aAAa,EAAG,UAASX,IAAI,CAACY,KAAM,EAArC;AAAwC,0BAAgB;AAAxD,SAFiC;AAG1Ca,QAAAA,IAAI,EAAEN,IAAI,CAACC,SAAL,CAAeK,IAAf;AAHoC,OAAlB,CAA5B;AAMA,YAAMZ,IAAI,GAAG,MAAMN,QAAQ,CAACM,IAAT,EAAnB;AACAQ,MAAAA,OAAO,CAACC,GAAR,CAAY,GAAGT,IAAf;AACAhB,MAAAA,QAAQ,CAAC,GAAGgB,IAAJ,CAAR;AACH,KAXD,CAWC,OAAMf,GAAN,EAAU;AACPC,MAAAA,MAAM,CAACD,GAAD,CAAN;AACAuB,MAAAA,OAAO,CAACC,GAAR,CAAYxB,GAAZ;AACH;AACJ,GAhBD;;AAkBA,SAAO;AAACQ,IAAAA,SAAD;AAAYV,IAAAA,KAAZ;AAAmBE,IAAAA;AAAnB,GAAP;AACH,CA9EM;;GAAMH,Q;UAIMF,c","sourcesContent":["import React, {useState} from \"react\";\n\nimport { useAuthContext } from \"./useAuthContext\";\nimport { useChatContext } from \"./useChatContext\";\n\nexport const useChats = () => {\n    const [chats, setChats] = useState([]);\n    const [err, setErr] = useState(null);\n\n    const {user} = useAuthContext();\n    //const {dispatch} = useChatContext()\n    const url = `${process.env.REACT_APP_BASE_URL}/api/v1/chats/${user._id}`;\n\n\n    const loadChats = async()=>{\n        setErr(null)\n       // var chaats = []\n        //const url = `${process.env.REACT_APP_BASE_URL}/api/v1/chats/${user._id}`;\n\n        try{\n            const response = await fetch(url, {\n                method: 'GET',\n                headers: {Authorization: `Bearer ${user.token}`}\n            })\n\n            const json = await response.json()\n\n            for (var i = 0; i < json.length; i++) {\n                for(var j = 0; j < i.length; j++) {\n                    if (!j.date){\n                        setErr(json)\n                        throw new Error(JSON.stringify(json))\n                    }\n                  //  chaats.push(j)\n                }\n\n\n                \n            }\n            //console.log(json.date)\n\n            // if (!json.date) {\n            //     setErr(json)\n            //     throw new Error(JSON.stringify(json))\n            // }\n           // console.log(\"hello\", JSON.parse(JSON.stringify(json)))\n            setChats(...json)\n            //dispatch({type: 'LOADMESSAGES', payload: json})\n\n\n\n\n        }catch(err){\n            setErr(err);\n            console.log(err)\n\n        }\n\n\n\n\n\n    }\n\n    const updateChat = async(cDate) => {\n        try{\n            //update chats on date\n            const response = await fetch(url +`/{cDate}`, {\n                method: 'PUT',\n                headers: {Authorization: `Bearer ${user.token}`, 'Content-Type': 'Application/json'},\n                body: JSON.stringify(body)\n            })\n\n            const json = await response.json();\n            console.log(...json)\n            setChats(...json)\n        }catch(err){\n            setErr(err);\n            console.log(err)\n        }\n    }\n\n    return {loadChats, chats, err};\n}"]},"metadata":{},"sourceType":"module"}